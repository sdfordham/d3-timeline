<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>D3 Page Template</title>
    <script src='https://d3js.org/d3.v7.min.js'></script>
  </head>
  <body>
    <script type='text/javascript'>
      d3.json('rome.json').then(
        res => {
          const svgHeight = 150;
          const svgWidth = 1000;
          const eraHeight = 75;
          const erasColorCycle = ['#4e79a7','#f28e2c','#e15759','#76b7b2','#59a14f','#edc949','#af7aa1','#ff9da7','#9c755f','#bab0ab'];

          const eras = res.eras;

          var svg = d3.select('body')
            .append('svg')
            .attr('width', svgWidth)
            .attr('height', svgHeight);

          var xScale = d3.scaleLinear()
            .domain([d3.min(eras, d => d.start), d3.max(eras, d => d.finish)])
            .range([0, svgWidth]);
          
          var xAxis = d3.axisBottom(xScale);

          svg.append('g')
            .attr('class', 'eras')
            .selectAll('rect')
            .data(eras)
            .enter()
            .append('rect')
            .attr('x', d => xScale(d.start))
            .attr('y', 0)
            .attr('width', d => xScale(d.finish) - xScale(d.start))
            .attr('height', eraHeight)
            .attr('fill', (d, i) => erasColorCycle[i % erasColorCycle.length])
            .attr('stroke', 'black')
            .attr('stroke-width', 0.025)
            .on('mouseover', function() {
              d3.select(this)
                .attr('fill-opacity', 0.5);
            })
            .on('mouseout', function() {
              d3.select(this)
                .attr('fill-opacity', null);
            });

          svg.append('g')
            .attr('class', 'x-axis')
            .attr('transform', 'translate(0,' + eraHeight + ')')
            .call(xAxis);
        }
      );
    </script>
  </body>
</html>
